var escala_ref_largo=600,escala_ref_ancho=280;function dibujar_canvas(e,t){var a=document.getElementById(e),r=a.getContext("2d"),l=a.width,o=a.height,n=a.width/2,i="P"+$v("pFlowStepId")+"_",s=$x(i+"ART_TIPO_ID").value,f=$x(i+"PLARGO").value,v=$x(i+"PANCHO").value,m=$x(i+"TRAZADOS").value.split(":"),u=$x(i+"SLOTTER").value.split(":");r.save(),r.setTransform(1,0,0,1,0,0),r.fillStyle="#fffefe",r.fillRect(0,0,l,o),r.stroke(),r.restore(),1==t?r.setTransform(1,0,0,1,n,100):(t=Math.min(escala_ref_largo/f,escala_ref_ancho/v),r.setTransform(t,0,0,t,a.clientWidth/2,50)),r.strokeStyle="#000000",r.lineWidth=2,r.font="25px Arial";var g=f/2;if(r.save(),r.translate(-g,0),r.beginPath(),r.rect(0,0,f,v),r.stroke(),r.restore(),"1"==s||s>"3"){r.save(),r.translate(-g,0);var T=0;for(A=0;A<m.length-1;A++)T+=1*m[A],r.beginPath(),r.moveTo(0,T),r.lineTo(f,T),r.stroke();T=0;var h=0,d=0;for(r.translate(f,0),r.textAlign="left",A=0;A<m.length;A++)d=(T+=1*m[A])/2+h/2,m[A]<30?r.font="25px Arial":r.font="50px Arial",r.fillText(Math.round(m[A]),10,d),h=T;r.restore()}if(s>="3"||"1"==s){T=0;for(r.save(),r.translate(-g,0),A=0;A<u.length;A++)T+=1*u[A],r.beginPath(),r.moveTo(T,0),r.lineTo(T,v),r.stroke();T=0;h=0;var _=0;for(r.textAlign="center",A=0;A<u.length;A++)_=(T+=1*u[A])/2+h/2,u[A]<100?r.font="25px Arial":r.font="50px Arial",r.fillText(u[A],_,-10),h=T;r.restore()}if("0"==s||"1"==s){var c=Number(document.getElementById("P30_MULT_X").value);if(c>1){r.save(),r.translate(-g,0);for(var x=Number(document.getElementById("P30_LARGO").value),A=1;A<c;A++)r.beginPath(),r.moveTo(x*A,0),r.lineTo(x*A,v),r.stroke();r.restore()}}if("0"==s){var P=Number(document.getElementById("P30_MULT_Y").value);if(P>1){r.save(),r.translate(-g,0);var b=Number(document.getElementById("P30_ANCHO").value);for(A=1;A<P;A++)r.beginPath(),r.moveTo(0,b*A),r.lineTo(f,b*A),r.stroke();r.restore()}}}